<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casalux - Online Rental Website</title>


    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="visitors.css">
    <script defer src="visitors.js"></script>
</head>
<body>

<!-- Header Section -->
<header>
    <div class="header-top">
        <div class="logo-container">
            <img src="../images/logo.png" alt="Casalux Logo" class="logo-img">
        <div class="logo">Casalux</div>
    </div>
        <div class="auth-buttons">

            <button class="register" onclick="window.location.href='../loginANDsignup/sign-up.html'">Register</button>
            <button class="signin" onclick="window.location.href='../loginANDsignup/log-in.html'">Sign in</button>

        </div>
    </div> 

    <!-- Navigation Menu (Now below the logo) -->
    <nav>
        <ul>
            
            <li class="home"><a class="active" href="#">Home</a></li>
            <li class="stays"><a href="../staysSection/stays.html">Stays</a></li>
            <!-- <li class="listyourproperty"> <a href="../PropertyManagement/prop.html">List your rooms</a></li> -->
             <li class="listyourproperty"><a href="#" onclick="showLoginPrompt()">List your rooms</a></li>
            <li class="aboutus"><a href="../aboutusSection/about-us.html">About Us</a></li>
        </ul>
    </nav>

</header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-text">
            <!-- <h1>Find The Best Stay For You</h1> -->
             <h1> Find The Best</h1>
             <h1> Stay For You</h1>
            <p>Find the perfect stay-luxury suites, cozy homes, and budget-friendly rooms, all in one place!</p>
            <button class="book-now" onclick="window.location.href='../staysSection/stays.html';">Book Now</button>
        </div>
        <div class="hero-image">
            <img src="../images/hotel.jpg" alt="Luxury Hotel">
        </div>
    </section>

        <!-- Search Bar -->
        <section class="search-bar">
            <div class="search-container">
            <input type="text" id="location-input" placeholder="Where are you going?">
    
            <!-- Check-in Date -->
            <div class="date-container">
                <input type="text" id="checkin" placeholder="Check-in Date" readonly onclick="openDatePicker('checkin')">
            </div>
    
            <!-- Check-out Date -->
            <div class="date-container">
                <input type="text" id="checkout" placeholder="Check-out Date" readonly onclick="openDatePicker('checkout')">
            </div>

            <!-- Number of People -->
                <div>
                <input type="number" id="people-input" placeholder="Number of People" min="0">
            </div>
    
            <button class="search-btn" id="search-btn">Search</button>
            </div>
        </section>

<!-- Browse by Property Type Section -->
<section class="property-types">
    <h2>Browse by Room Type</h2>
    <div class="property-slider-container">
        <button class="property-slide-button left"></button>
        <div class="property-slider">
            <div class="property-slide">
                <a href="../suiteRoom/suiteroom.html">
                <img src="../images/suiteroom.jpg" alt="Suite">
                <p>Suite</p>
                </a>
            </div>
            <div class="property-slide">
                <a href="../deluxeRoom/deluxeroom.html">
                <img src="../images/deluxeroom.jpg" alt="Deluxe">
                <p>Deluxe</p>
                </a>
            </div>


            <div class="property-slide">
                <a href="../singleRoom/singleroom.html">
                    <img src="../images/singleroom.jpg" alt="Single">
                    <p>Single</p>
                </a>
            </div>

            <div class="property-slide">
                <a href="../doubleRoom/doubleroom.html">
                <img src="../images/doubleroom.jpg" alt="Double">
                <p>Double</p>
                </a>
            </div>

            <div class="property-slide">
                <a href="../familyRoom/familyroom.html">
                <img src="../images/familyroom.jpg" alt="Family">
                <p>Family</p>
                </a>
            </div>

            <div class="property-slide">
                <a href="../penthouseRoom/penthouse.html">
                <img src="../images/penthouse.jpg" alt="penthouse">
                <p>Penthouse</p>
                </a>
            </div>

        </div>
        <button class="property-slide-button right"></button>
    </div>
</section>

<div class="leaf-container">
    <div class="leaves">
        <div class="leaf">
            <img src="../images/leafimage1.jpg" alt="Leaf Image 1">
        </div>
        <div class="leaf right-leaf">
            <img src="../images/leafimage2.jpg" alt="Leaf Image 2">
        </div>
    </div>
    <div class="event-text">
        <h2>Best Place for <br> special events <br> Since 2024</h2>
    </div>
</div>

    <section class="testimonials">
        <h2>What People Say About Us</h2>
        <div class="testimonial-container" id="testimonialContainer"></div>

<h3 id="openModalBtn">Add a Comment</h3>

<!-- Popup Modal -->
<div id="testimonialModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <form id="testimonialForm">
        <input type="text" id="profile_picture" placeholder="Person Image" required>
        <input type="text" id="room_image" placeholder="Room Image" required>
        <textarea id="comment" placeholder="Write your comment..." required></textarea>
        <input type="number" id="stars" placeholder="Stars (1-5)" min="1" max="5" required>
        <button type="submit">Submit</button>
    </form>
  </div>
</div>





<div id="testimonialContainer"></div> <!-- This is important -->

<!-- Login Prompt Modal -->
        <div id="loginPromptModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeLoginPrompt()">Ã—</span>
                <h3>Do you want to log in / sign up to owner?</h3>
                <div class="button-container">
                    <button onclick="window.location.href='../loginANDsignup/sign-up.html';">Yes</button>
                    <button onclick="closeLoginPrompt()">No</button>
                </div>
            </div>
        </div>
    </section>



 </section>


    <footer>
        <p>&copy; 2025 Online Rental Website. All rights reserved.</p>
        <div class="footer-links">
            <a href="../profile/privacy-policy.html">Privacy Policy</a>
            <a href="../profile/terms-and-conditions.html">Terms of Service</a>
            <!-- <a href="#">Contact Us</a> -->
            <a href="../HelpSection/help.html">Help & Support</a>
        </div>
    </footer>





    <!-- Profile Popup Modal -->
<div id="profileModal" class="profile-modal">
    <div class="profile-modal-content">
      <span class="close-profile-modal">&times;</span>
      <iframe src="../profile/profile.html" frameborder="0"></iframe>
    </div>
  </div>
  



    <script>
        let submitInProgress = false;



        function showLoginPrompt() {
            const modal = document.getElementById("loginPromptModal");
            modal.style.display = "block";
        }

        function closeLoginPrompt() {
            const modal = document.getElementById("loginPromptModal");
            modal.style.display = "none";
        }









    
        function fetchTestimonials() {
            fetch('../visitors/fetch_testimonials.php')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById("testimonialContainer");
                    container.innerHTML = '';
                    data.forEach(item => {
                        const card = document.createElement("div");
                        card.className = "testimonial-card";
    
                        const filledStars = '<i class="fas fa-star"></i>'.repeat(Number(item.stars));
                        const emptyStars = '<i class="far fa-star"></i>'.repeat(5 - Number(item.stars));
    
                        card.innerHTML = `
                            <div class="profile-picture">
                                <img src="${item.profile_picture}" alt="User">
                            </div>
                            <div class="room-image">
                                <img src="${item.room_image}" alt="Room">
                            </div>
                            <div class="stars">${filledStars + emptyStars}</div>
                            <p>"${item.comment}"</p>
                        `;
                        container.appendChild(card);
                    });
                })
                .catch(error => console.error('Error loading testimonials:', error));
        }
    
        document.addEventListener("DOMContentLoaded", () => {
            fetchTestimonials();
    
            const modal = document.getElementById("testimonialModal");
            const openBtn = document.getElementById("openModalBtn");
            const closeBtn = document.querySelector(".close");
    
            openBtn.addEventListener("click", () => {
                modal.style.display = "block";
            });
    
            closeBtn.addEventListener("click", () => {
                modal.style.display = "none";
            });
    
            window.addEventListener("click", (e) => {
                if (e.target === modal) {
                    modal.style.display = "none";
                }
            });
    
            const form = document.getElementById("testimonialForm");
            form.addEventListener("submit", function (e) {
                e.preventDefault();
    
                if (submitInProgress) return;
                submitInProgress = true;
    
                const data = {
                    profile_picture: document.getElementById("profile_picture").value.trim(),
                    room_image: document.getElementById("room_image").value.trim(),
                    comment: document.getElementById("comment").value.trim(),
                    stars: parseInt(document.getElementById("stars").value)
                };
    
                if (!data.profile_picture || !data.room_image || !data.comment || isNaN(data.stars) || data.stars < 1 || data.stars > 5) {
                    alert("Please fill all fields correctly. Stars must be between 1 and 5.");
                    submitInProgress = false;
                    return;
                }
    
                fetch("../visitors/add_testimonial.php", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(data)
                })
                .then(res => res.json())
                .then(response => {
                    if (response.success) {
                        fetchTestimonials();
                        alert("Testimonial added successfully!");
                        form.reset();
                        modal.style.display = "none";
                    } else {
                        alert("Error: " + response.message);
                    }
                    submitInProgress = false;
                })
                .catch(err => {
                    alert("Failed to connect to server.");
                    console.error(err);
                    submitInProgress = false;
                });
            });
        });
    </script>
</body>
</html>